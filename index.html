<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å ‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #fafafa;
            color: #1a1a1a;
            padding-bottom: 60px;
        }
        .header {
            background: white;
            border-bottom: 1px solid #e5e5e5;
            padding: 16px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        h1 { font-size: 20px; font-weight: 600; margin-bottom: 4px; }
        .subtitle { color: #737373; font-size: 13px; }
        .toolbar {
            display: flex;
            gap: 8px;
            padding: 12px;
            background: white;
            border-bottom: 1px solid #e5e5e5;
            flex-wrap: wrap;
            position: sticky;
            top: 66px;
            z-index: 99;
        }
        .btn {
            padding: 10px 14px;
            border: 1px solid #e5e5e5;
            background: white;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }
        .btn:active { transform: scale(0.95); }
        .btn-primary { background: #667eea; color: white; border-color: #667eea; }
        .btn.active { background: #667eea; color: white; border-color: #667eea; }
        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            padding: 12px;
            background: white;
            border-bottom: 1px solid #e5e5e5;
        }
        .stat-card {
            background: #fafafa;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-label { font-size: 11px; color: #737373; margin-bottom: 4px; }
        .stat-value { font-size: 24px; font-weight: 600; }
        .content { padding: 12px; }
        .card {
            background: white;
            border: 1px solid #e5e5e5;
            border-radius: 10px;
            padding: 16px;
            margin-bottom: 12px;
        }
        .card.full { opacity: 0.6; border-left: 3px solid #ef4444; }
        .card.interested { border-left: 3px solid #10b981; }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
            gap: 12px;
        }
        .card-title {
            font-size: 15px;
            font-weight: 600;
            flex: 1;
            line-height: 1.4;
        }
        .card-actions {
            display: flex;
            gap: 12px;
            flex-shrink: 0;
        }
        label {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 12px;
            cursor: pointer;
            user-select: none;
        }
        input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #667eea;
        }
        .info-item {
            margin-bottom: 10px;
        }
        .info-label {
            font-size: 11px;
            font-weight: 500;
            color: #737373;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
        }
        input[type="text"],
        input[type="tel"],
        input[type="url"],
        textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #e5e5e5;
            border-radius: 6px;
            font-size: 14px;
            background: #fafafa;
        }
        input:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            background: white;
        }
        .phone-display {
            padding: 10px;
            background: #f0fdf4;
            border: 1px solid #86efac;
            border-radius: 6px;
            color: #15803d;
            font-weight: 500;
            text-decoration: none;
            display: block;
            text-align: center;
        }
        textarea { resize: vertical; min-height: 60px; }
        .hidden { display: none !important; }
        .upload-btn {
            padding: 10px 12px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        .upload-btn:active { transform: scale(0.95); }
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 8px;
            margin-top: 10px;
        }
        .gallery-item {
            position: relative;
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            border: 2px solid #e5e5e5;
        }
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .gallery-item .delete-img {
            position: absolute;
            top: 4px;
            right: 4px;
            background: rgba(239, 68, 68, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å ‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å ‡∏™‡∏±‡∏á‡∏Ç‡∏•‡∏∞‡∏ö‡∏∏‡∏£‡∏µ</h1>
        <div class="subtitle">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å 60 ‡πÅ‡∏´‡πà‡∏á</div>
    </div>
    
    <div class="toolbar">
        <button class="btn btn-primary" onclick="save()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
        <button class="btn" onclick="exportData()">üì§ Export</button>
        <button class="btn" onclick="document.getElementById('importFile').click()">üì• Import</button>
        <input type="file" id="importFile" accept=".json" style="display:none" onchange="importData(this.files[0])">
        <button class="btn" onclick="exp()">üìã CSV</button>
        <div style="flex: 1"></div>
        <button class="btn active" id="fAll" onclick="flt('all')">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
        <button class="btn" id="fAvail" onclick="flt('avail')">‡∏ß‡πà‡∏≤‡∏á</button>
        <button class="btn" id="fFull" onclick="flt('full')">‡πÄ‡∏ï‡πá‡∏°</button>
        <button class="btn" id="fInt" onclick="flt('int')">‡∏à‡∏≠‡∏á</button>
    </div>
    
    <div class="stats">
        <div class="stat-card">
            <div class="stat-label">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
            <div class="stat-value" id="sTotal">60</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">‡∏ß‡πà‡∏≤‡∏á</div>
            <div class="stat-value" style="color:#10b981" id="sAvail">60</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">‡πÄ‡∏ï‡πá‡∏°</div>
            <div class="stat-value" style="color:#ef4444" id="sFull">0</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">‡∏à‡∏≠‡∏á</div>
            <div class="stat-value" style="color:#f59e0b" id="sInt">0</div>
        </div>
    </div>
    
    <div class="content">
        <div id="list"></div>
    </div>

    <script>
        const ACCOMMODATIONS = [
            {i:1,n:"‡∏ß‡∏¥‡∏•‡∏•‡πà‡∏≤‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å",p:"092-599-2669"},{i:2,n:"‡∏ì‡∏±‡∏ï‡∏ï‡∏∞-‡πÄ‡∏≠‡πà‡∏á-‡∏ï‡πà‡∏≠‡∏á-‡πÄ‡∏Æ‡πâ‡∏≤‡∏™‡πå",p:"081-942-3057"},
            {i:3,n:"‡∏≠‡∏∑‡πà‡∏≠‡∏ï‡πà‡∏≠‡∏á ‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"092-249-1915"},{i:4,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏ã‡∏≤‡∏Ñ‡∏∏‡∏£‡∏¥‡∏ï ‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"086-170-3410"},
            {i:5,n:"‡∏ó‡∏≤‡∏á‡∏ä‡πâ‡∏≤‡∏á‡πÄ‡∏ú‡∏∑‡∏≠‡∏Å‡πÇ‡∏Æ‡∏°",p:"099-332-4934"},{i:6,n:"‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å‡∏û‡∏≠‡πÄ‡∏û‡∏•‡∏¥‡∏ô",p:"081-995-5466"},
            {i:7,n:"‡∏™‡∏ß‡∏µ‡∏ó‡∏≠‡∏∑‡πà‡∏≠‡∏ï‡πà‡∏≠‡∏á",p:"085-542-6623"},{i:8,n:"My Home",p:"063-183-4056"},
            {i:9,n:"‡∏Å‡∏±‡∏õ‡∏ï‡∏±‡∏ô‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å",p:"089-154-0904"},{i:10,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏ô‡πâ‡∏≥‡∏ó‡∏¥‡∏û‡∏¢‡πå",p:"065-537-6371"},
            {i:11,n:"‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÑ‡∏≠‡∏´‡∏°‡∏≠‡∏Å ‡∏Ñ‡∏±‡∏ô‡∏ó‡∏£‡∏µ‡∏ß‡∏¥‡∏ß",p:"096-343-3299"},{i:12,n:"Hill House My Loft",p:"080-781-5702"},
            {i:13,n:"‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏≠‡∏µ‡πà‡∏¢‡∏ß‡∏¢‡πâ‡∏ß‡∏ô ‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"065-693-5930"},{i:14,n:"‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà 9 ‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"084-077-2181"},
            {i:15,n:"‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏ó‡∏≠‡πÄ‡∏£‡∏ã",p:"098-518-7888"},{i:16,n:"‡∏°‡∏±‡∏á‡∏Å‡∏£‡∏•‡∏≤‡∏ö‡∏≤ ‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"097-030-3888"},
            {i:17,n:"‡∏ß‡∏±‡∏ô ‡∏ß‡∏±‡∏ô ‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"065-968-5126"},{i:18,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ñ‡∏ß‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"062-363-9128"},
            {i:19,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏â‡∏±‡∏ô‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"081-116-4578"},{i:20,n:"‡∏•‡∏°‡∏´‡∏ô‡∏≤‡∏ß‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"097-085-8052"},
            {i:21,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏´‡∏°‡∏≠‡∏Å",p:"084-079-2565"},{i:22,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏¢‡∏≤‡∏¢‡∏Å‡∏∞‡πÄ‡∏´‡∏£‡∏µ‡πà‡∏¢‡∏á",p:"095-249-3935"},
            {i:23,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡∏∏‡πà‡∏´‡∏ô‡πà‡∏≠‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"083-155-0636"},{i:24,n:"‡∏≠‡∏¥‡πà‡∏°‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡πÄ‡∏Æ‡πâ‡∏≤‡∏™‡πå & ‡πÅ‡∏Ñ‡∏°‡∏õ‡πå‡∏õ‡∏¥‡πâ‡∏á",p:"065-552-7994"},
            {i:25,n:"‡πÑ‡∏ó‡∏ó‡∏≤‡∏ß",p:"061-332-8074"},{i:26,n:"‡∏ï‡πâ‡∏ô‡∏ï‡∏≤‡∏•‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå @ ‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å",p:"092-988-7339"},
            {i:27,n:"‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"086-798-5863"},{i:28,n:"‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏≠‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡∏ß‡∏±‡∏ç ‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"065-693-5930"},
            {i:29,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡∏∞‡∏Ç‡∏µ‡πà‡∏ô",p:"082-089-6391"},{i:30,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏ï‡∏≤‡∏û‡∏• ‡∏¢‡∏≤‡∏¢‡∏ó‡∏¥‡∏û‡∏¢‡πå ‡∏ß‡∏¥‡∏•‡πÄ‡∏•‡∏à",p:"098-403-9946"},
            {i:31,n:"‡πÇ‡∏Å‡πÇ‡∏Å‡πâ ‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"085-242-3908"},{i:32,n:"Green House",p:"098-554-4742"},
            {i:33,n:"Were House",p:"080-761-3574"},{i:34,n:"Say Hi",p:"080-056-9734"},
            {i:35,n:"‡∏™‡∏∏‡∏ß‡∏£‡∏£‡∏ì‡∏ß‡∏á‡∏Ñ‡πå‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"092-549-7098"},{i:36,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏£‡∏¥‡∏°‡∏î‡∏≠‡∏¢",p:"088-455-3823"},
            {i:37,n:"‡∏ï‡πâ‡∏ô‡∏ï‡∏≤‡∏•‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"092-988-7339"},{i:38,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏û‡πà‡∏≠",p:"061-350-8835"},
            {i:39,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏ô‡πâ‡∏≥‡∏Ñ‡πâ‡∏≤‡∏á",p:"065-690-5848"},{i:40,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏õ‡πâ‡∏≤‡∏õ‡∏∏‡∏¢‡∏°‡∏∏‡∏ï‡∏•‡∏≤‡∏î‡∏Ñ‡∏î‡∏¥‡πà‡∏á",p:"061-295-6299"},
            {i:41,n:"‡∏ó‡∏¥‡∏ô‡∏Å‡∏£‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"086-170-3410"},{i:42,n:"‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏á‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"063-896-3561"},
            {i:43,n:"‡πÄ‡∏≠‡∏Å‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"087-995-4229"},{i:44,n:"‡∏≠‡∏µ‡∏õ‡∏∏‡∏£‡∏¥‡∏ò‡∏≤‡∏£‡∏≤",p:"095-305-9036"},
            {i:45,n:"‡πÑ‡∏°‡πâ‡∏ô‡πâ‡∏≥ ‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå ‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å",p:"063-662-6397"},{i:46,n:"‡∏à‡∏∞‡∏´‡∏ô‡πà‡∏≠ ‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"093-127-2361"},
            {i:47,n:"Vela Pilok ‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:"061-041-7371"},{i:48,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏õ‡∏¥‡∏•‡πä‡∏≠‡∏Å‡∏ß‡∏¥‡∏ß",p:""},
            {i:49,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏≠‡∏µ‡∏ï‡πà‡∏≠‡∏á‡∏£‡∏¥‡∏°‡∏ô‡πâ‡∏≥",p:""},{i:50,n:"Baan Pilok & Camping",p:""},
            {i:51,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏£‡∏¥‡∏°‡∏ò‡∏≤‡∏£ ‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å",p:""},{i:52,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏≤‡∏¢‡∏´‡∏°‡∏≠‡∏Å",p:""},
            {i:53,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏û‡∏∏‡∏î‡∏ã‡πâ‡∏≠‡∏ô ‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å",p:""},{i:54,n:"‡∏ö‡πâ‡∏≤‡∏ô‡πÇ‡∏≠‡πÇ‡∏ã‡∏ô ‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å",p:""},
            {i:55,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡πà‡∏≤‡∏ô‡∏´‡∏°‡∏≠‡∏Å ‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å",p:""},{i:56,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏ô‡∏≤‡∏ß‡∏à‡∏±‡∏á ‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå",p:""},
            {i:57,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏ä‡∏°‡∏ß‡∏¥‡∏ß ‡∏≠‡∏µ‡∏ï‡πà‡∏≠‡∏á",p:""},{i:58,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏û‡∏±‡∏Å‡∏õ‡πâ‡∏≤‡πÅ‡∏õ‡πä‡∏î ‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å",p:""},
            {i:59,n:"‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏°‡πâ‡∏™‡∏ô ‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å",p:""},{i:60,n:"‡∏ö‡πâ‡∏≤‡∏ô‡∏Ç‡∏∏‡∏ô‡πÄ‡∏Ç‡∏≤ ‡πÇ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏¢‡πå ‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å",p:""}
        ];
        
        let data = [];
        let cf = 'all';
        
        function init() {
            const s = localStorage.getItem('pilokData');
            if (s) {
                data = JSON.parse(s);
            } else {
                data = ACCOMMODATIONS.map(d => ({...d, p2:'', fb:'', l:'', m:'', f:false, t:false, no:'', imgs:[]}));
            }
            render();
        }
        
        function save() {
            localStorage.setItem('pilokData', JSON.stringify(data));
            saveCloud(); // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏õ Cloud ‡∏î‡πâ‡∏ß‡∏¢
            alert('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß (Sync ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ)');
        }
        
        function exportData() {
            const dataStr = JSON.stringify(data, null, 2);
            const blob = new Blob([dataStr], {type: 'application/json'});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å_‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•_${new Date().toISOString().slice(0,10)}.json`;
            a.click();
            alert('‚úÖ Export ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏™‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠ Sync ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');
        }
        
        function importData(file) {
            if (!file) return;
            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const imported = JSON.parse(e.target.result);
                    if (confirm(`Import ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ${imported.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£?\n\n‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà`)) {
                        data = imported;
                        localStorage.setItem('pilokData', JSON.stringify(data));
                        render();
                        alert('‚úÖ Import ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Sync ‡πÅ‡∏•‡πâ‡∏ß');
                    }
                } catch (e) {
                    alert('‚ùå ‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                }
            };
            reader.readAsText(file);
        }
        
        function upd(i, k, v) {
            const x = data.find(d => d.i === i);
            if (x) x[k] = v;
        }
        
        function tgFull(i) {
            const x = data.find(d => d.i === i);
            if (x) { x.f = !x.f; render(); }
        }
        
        function tgInt(i) {
            const x = data.find(d => d.i === i);
            if (x) { x.t = !x.t; render(); }
        }
        
        function flt(f) {
            cf = f;
            document.querySelectorAll('.toolbar .btn').forEach(b => b.classList.remove('active'));
            const ids = {all: 'fAll', avail: 'fAvail', full: 'fFull', int: 'fInt'};
            document.getElementById(ids[f]).classList.add('active');
            render();
        }
        
        function render() {
            const fd = data.filter(d => {
                if (cf === 'avail') return !d.f;
                if (cf === 'full') return d.f;
                if (cf === 'int') return d.t;
                return true;
            });
            
            document.getElementById('list').innerHTML = fd.map(d => {
                const cls = d.f ? 'full' : (d.t ? 'interested' : '');
                const tel = (d.p || '').replace(/[-\s\/]/g, '');
                const tel2 = (d.p2 || '').replace(/[-\s\/]/g, '');
                
                return `<div class="card ${cls}">
                    <div class="card-header">
                        <div class="card-title">${d.i}. ${d.n}</div>
                        <div class="card-actions">
                            <label><input type="checkbox" ${d.f?'checked':''} onchange="tgFull(${d.i})"> ‡πÄ‡∏ï‡πá‡∏°</label>
                            <label><input type="checkbox" ${d.t?'checked':''} onchange="tgInt(${d.i})"> ‡∏à‡∏≠‡∏á</label>
                        </div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">üìû ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ 1</div>
                        ${d.p ? `<a href="tel:${tel}" class="phone-display">${d.p}</a>` : 
                          `<input type="tel" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå" value="${d.p||''}" onchange="upd(${d.i},'p',this.value)">`}
                    </div>
                    <div class="info-item">
                        <div class="info-label">üìû ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ 2</div>
                        ${d.p2 && d.p2.trim() ? `<a href="tel:${tel2}" class="phone-display">${d.p2}</a>` : 
                          `<input type="tel" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏™‡∏≥‡∏£‡∏≠‡∏á" value="${d.p2||''}" onchange="upd(${d.i},'p2',this.value)">`}
                    </div>
                    <div class="info-item">
                        <div class="info-label">üìò Facebook</div>
                        <input type="url" placeholder="facebook.com/..." value="${d.fb||''}" onchange="upd(${d.i},'fb',this.value)">
                    </div>
                    <div class="info-item">
                        <div class="info-label">üí¨ LINE ID</div>
                        <input type="text" placeholder="@lineid" value="${d.l||''}" onchange="upd(${d.i},'l',this.value)">
                    </div>
                    <div class="info-item">
                        <div class="info-label">üó∫Ô∏è Google Maps</div>
                        <input type="url" placeholder="https://maps.app.goo.gl/..." value="${d.m||''}" onchange="upd(${d.i},'m',this.value)">
                    </div>
                    <div class="info-item">
                        <div class="info-label">üìù ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</div>
                        <textarea placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤, ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß..." onchange="upd(${d.i},'no',this.value)">${d.no||''}</textarea>
                    </div>
                    <div class="info-item">
                        <div class="info-label">üì∑ ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 5 ‡∏£‡∏π‡∏õ)</div>
                        <input type="file" id="file-${d.i}" accept="image/*" multiple style="display:none" onchange="uploadImg(${d.i}, this.files)">
                        <button class="upload-btn" onclick="document.getElementById('file-${d.i}').click()">
                            üì∏ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ
                        </button>
                        <div class="gallery" id="gallery-${d.i}">
                            ${(d.imgs || []).map((img, idx) => `
                                <div class="gallery-item">
                                    <img src="${img}" alt="‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà ${idx + 1}">
                                    <button class="delete-img" onclick="delImg(${d.i}, ${idx})">√ó</button>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>`;
            }).join('');
            
            const fc = data.filter(d => d.f).length;
            const ic = data.filter(d => d.t).length;
            document.getElementById('sFull').textContent = fc;
            document.getElementById('sAvail').textContent = data.length - fc;
            document.getElementById('sInt').textContent = ic;
        }
        
        function exp() {
            let csv = '\ufeff‡∏•‡∏≥‡∏î‡∏±‡∏ö,‡∏ä‡∏∑‡πà‡∏≠,‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞,‡∏à‡∏≠‡∏á,‡πÄ‡∏ö‡∏≠‡∏£‡πå1,‡πÄ‡∏ö‡∏≠‡∏£‡πå2,Facebook,LINE,Maps,‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏\n';
            data.forEach(d => {
                csv += `${d.i},"${d.n}",${d.f?'‡πÄ‡∏ï‡πá‡∏°':'‡∏ß‡πà‡∏≤‡∏á'},${d.t?'‡πÉ‡∏ä‡πà':''},"${d.p||''}","${d.p2||''}","${d.fb||''}","${d.l||''}","${d.m||''}","${(d.no||'').replace(/"/g,'""')}"\n`;
            });
            const blob = new Blob([csv], {type: 'text/csv;charset=utf-8;'});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏õ‡∏¥‡∏•‡πá‡∏≠‡∏Å_${new Date().toISOString().slice(0,10)}.csv`;
            a.click();
        }
        
        function uploadImg(id, files) {
            const x = data.find(d => d.i === id);
            if (!x) return;
            
            if (!x.imgs) x.imgs = [];
            
            // ‡∏à‡∏≥‡∏Å‡∏±‡∏î 5 ‡∏£‡∏π‡∏õ
            const remaining = 5 - x.imgs.length;
            if (remaining <= 0) {
                alert('‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 5 ‡∏£‡∏π‡∏õ');
                return;
            }
            
            const toUpload = Math.min(files.length, remaining);
            let loaded = 0;
            
            for (let i = 0; i < toUpload; i++) {
                const file = files[i];
                if (file.size > 2 * 1024 * 1024) {
                    alert('‡πÑ‡∏ü‡∏•‡πå‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 2MB');
                    continue;
                }
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    x.imgs.push(e.target.result);
                    loaded++;
                    if (loaded === toUpload) {
                        render();
                        save();
                    }
                };
                reader.readAsDataURL(file);
            }
        }
        
        function delImg(id, idx) {
            const x = data.find(d => d.i === id);
            if (x && x.imgs) {
                x.imgs.splice(idx, 1);
                render();
                save();
            }
        }
        
        setInterval(() => localStorage.setItem('pilokData', JSON.stringify(data)), 30000);
        init();
        
        // ========== AUTO-SYNC REALTIME (PUBLIC - ‡πÑ‡∏°‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢) ==========
        const SYNC_KEY = 'pilok-data-v1';
        const STORAGE_URL = 'https://kvdb.io/J8kNqF5wZx6WvRm4Lpz3X8';
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Cloud
        async function loadCloud() {
            try {
                const res = await fetch(`${STORAGE_URL}/${SYNC_KEY}`);
                if (res.ok) {
                    const cloudData = await res.json();
                    if (cloudData && Array.isArray(cloudData) && cloudData.length > 0) {
                        const localTime = parseInt(localStorage.getItem('lastSync') || '0');
                        const cloudTime = parseInt(cloudData[0]?._sync || '0');
                        
                        if (cloudTime > localTime) {
                            data = cloudData;
                            render();
                            localStorage.setItem('lastSync', cloudTime.toString());
                            console.log('‚úÖ Sync ‡∏à‡∏≤‡∏Å Cloud');
                        }
                    }
                }
            } catch (e) {
                console.log('‚ö†Ô∏è ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Local');
            }
        }
        
        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏õ Cloud
        async function saveCloud() {
            try {
                if (!data[0]._sync) data[0]._sync = 0;
                data[0]._sync = Date.now();
                
                const res = await fetch(`${STORAGE_URL}/${SYNC_KEY}`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data)
                });
                
                if (res.ok) {
                    localStorage.setItem('lastSync', data[0]._sync.toString());
                    console.log('‚úÖ Sync ‡πÑ‡∏õ Cloud');
                }
            } catch (e) {
                console.log('‚ö†Ô∏è ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Local ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß');
            }
        }
        
        // Auto-load ‡∏ó‡∏∏‡∏Å 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        setInterval(loadCloud, 10000);
        
        // Auto-save ‡∏ó‡∏∏‡∏Å 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        setInterval(() => {
            localStorage.setItem('pilokData', JSON.stringify(data));
            saveCloud();
        }, 30000);
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
        setTimeout(loadCloud, 2000);
    </script>
</body>
</html>

